# 2. 람다 계층을 사용한 라이브러리 패키징

<br>

### 실습

---

**목표**

외부 라이브러리를 사용하는 람다 함수를 배포

<br>

**해결방법**

폴더를 생성 → pip를 사용해 파이썬 패키지를 폴더에 설치 → 폴더 앞축 → 함수에서 활용할 람다 계층을 생성

1. 계층을 사용할 람다 함수 생성
2. 계층의 내용을 복사할 디렉터리 생성
3. pip를 사용해 requests 모듈을 디렉터리에 설지
   1. requests 모듈 → 외부 라이브러리 사용
4. 디렉터리 내용을 압축
5. 계층을 게시하고 계층 arn을 환경 변수에 저장
6. 람다 함수가 방금 생성한 계층을 사용할 수 있도록 업데이트

<br>

**유효성 검사**

다음 명령어로 함수를 테스트

`aws lambda invoke —function-name AWSCookbook502Lambda response.json && cat response.json`

<br><br>

### 정리

---

- 해당 실습에서는 파이썬 requests 모듈을 계층으로 패키징하고 해당 모듈을 사용하는 파이썬 함수를 배포했다.

<br><br>

### AWS Lambda 계층

---

- 람다 함수에서 공통적으로 사용되는 코드나 라이브러리를 중앙에서 관리하고 재사용할 수 있게 해주는 기능
- 계층에서 관리되는 코드와 라이브러리가 변경되어도 람다 함수 코드를 직접 수정할 필요 없이 재배포, 수정이 가능
- 람다 함수의 용량을 줄일 수 있다.
- 다른 AWS 계정과 공유해 여러 함수에서 사용할 수 있다.
- 함수가 사용 중인 기존 버전에 영향을 주지 않고 계층의 새 버전을 배포하고 테스트 할 수 있도록 버전 제어
