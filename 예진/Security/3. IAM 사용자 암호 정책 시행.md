# 1.3 AWS ê³„ì •ì˜ IAM ì‚¬ìš©ì ì•”í˜¸ ì •ì±… ì‹œí–‰

ë³´ì•ˆ ì •ì±…ì— ë”°ë¼ AWS ê³„ì • ë‚´ì˜ ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•´ ì•”í˜¸ ì •ì±…ì„ ì‹œí–‰í•´ì•¼ í•©ë‹ˆë‹¤.

<br>
<br>

### ì‹¤ìŠµ ë‚´ìš©

---

AWS ê³„ì • ë‚´ì˜ IAM ì‚¬ìš©ìì— ëŒ€í•œ ì•”í˜¸ ì •ì±…ì„ ì„¤ì •í•©ë‹ˆë‹¤.

IAM ê·¸ë£¹ê³¼ IAM ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ê·¸ë£¹ì— ì‚¬ìš©ìë¥¼ ì¶”ê°€í•´ ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ëëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

1. ì½˜ì†”ì—ì„œ IAM ì‚¬ìš©ìì— SecretsManagerReadWriteì™€ IAMFullAccess ì •ì±…ì„ ì„¤ì •
2. AWS CLIë¥¼ ì‚¬ìš©í•´ ì†Œë¬¸ì, ëŒ€ë¬¸ì, ê¸°í˜¸, ìˆ«ì, ìµœì†Œê¸¸ì´ 32ì, ìµœëŒ€ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©ê¸°ê°„ 90ì¼, ë¹„ë°€ë²ˆí˜¸ ì¬ì‚¬ìš© ë°©ì§€ë¥¼ IAM ì•”í˜¸ ì •ì±…ìœ¼ë¡œ ì„¤ì •

   ```jsx
   aws iam update-account-password-policy --minimum-password-length 32 --require-symbols --require-numbers --require-uppercase-characters --require-lowercase-characters --allow-users-to-change-password --max-password-age 90 --password-reuse-prevention 1
   ```

3. IAM ê·¸ë£¹ ìƒì„±

   ```jsx
   aws iam create-group --group-name AWSCookbook103Group
   ```

   â†’ IAM ê·¸ë£¹ ì •ë³´ê°€ ì¶œë ¥ ê²°ê³¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

4. ê·¸ë£¹ì— AWSBillingReadOnlyAccess ì •ì±…ì„ ì—°ê²°

   ```jsx
   aws iam attach-group-policy --group-name AWSCookbook103Group --policy-arn arn:aws:iam::aws:policy/AWSBillingReadOnlyAccess
   ```

   ğŸ“ŒÂ IAM ì •ì±…ì€ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ì—°ê²°í•˜ëŠ” ê²ƒë³´ë‹¤ ê·¸ë£¹ì— ì—°ê²°í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤!

5. IAM ì‚¬ìš©ì ìƒì„±

   ```jsx
   aws iam create-user --user-name awscookbook103user
   ```

   â†’ IAM ì‚¬ìš©ì ì •ë³´ê°€ ì¶œë ¥ ê²°ê³¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

6. `Secret Manager`ì„ ì‚¬ìš©í•´ ì•”í˜¸ ì •ì±…ì„ ì¤€ìˆ˜í•˜ëŠ” ì•”í˜¸ë¥¼ ìƒì„±

   ```jsx
   RANDOM_STRING=$(aws secretsmanager get-random-password --password-length 32 --require-each-included-type --output text --query RandomPassword)
   ```

7. 6ë²ˆì—ì„œ ìƒì„±í•œ ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œê·¸ì¸ í”„ë¡œí•„ì„ ë§Œë“¦

   ```jsx
   aws iam create-login-profile --user-name awscookbook103user --password $RANDOM_STRING
   ```

   â†’ ë¡œê·¸ì¸ í”„ë¡œí•„ ì •ë³´ (username, createDate, PasswordResetRequired)ê°€ ì¶œë ¥ ê²°ê³¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

8. AWSBillingReadOnlyAccess ì •ì±…ì„ ì—°ê²°í•œ IAM ê·¸ë£¹ì— ì‚¬ìš©ì(AWSCookbook103Group)ë¥¼ ì¶”ê°€

   ```jsx
   aws iam add-user-to-group --group-name AWSCookbook103Group --user-name awscookbook103user
   ```

<br>
<br>

### ì‹¤ìŠµ ê²°ê³¼

---

![image](https://user-images.githubusercontent.com/49095587/221417978-dbbb2a7b-0bed-4389-895f-042bf17dc8fd.png)

<br>
<br>

### ìœ íš¨ì„± ê²€ì‚¬

---

ì•”í˜¸ ì •ì±…ì´ í™œì„±í™”ë¼ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤

```jsx
aws iam get-account-password-policy
```

ì¶œë ¥ ê²°ê³¼

```jsx
{
    "PasswordPolicy": {
        "MinimumPasswordLength": 32,
        "RequireSymbols": true,
        "RequireNumbers": true,
        "RequireUppercaseCharacters": true,
        "RequireLowercaseCharacters": true,
        "AllowUsersToChangePassword": true,
        "ExpirePasswords": true,
        "MaxPasswordAge": 90,
        "PasswordReusePrevention": 1
    }
}
```

<br>
<br>

### ì¶”ê°€

---

IAM ì‚¬ìš©ìëŠ” MFA ì¸ì¦ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
