# 4. Athena를 사용한 S3 파일 쿼리

<br>

### 실습

---

- S3에 저장된 CSV 파일을 인덱싱하지 않고 SQL 쿼리를 실행하자
- Athena의 결과 S3 버킷 위치를 구성 → Athena 편집기에서 데이터 카탈로그 데이터베이스와 데이블 생성 → S3 버킷의 데이터의 SQL 쿼리를 실행

<br>
<br>

### 정리

---

- `Athena` : 완전 관리형 서버리스 쿼리 서비스로, **S3에 저장된 데이터를 쉽게 분석**하고, SQL 쿼리를 사용하여 대규모 데이터 세트에서 직접 작업할 수 있다. 다양한 형식의 데이터 쿼리 가능

- 과거에는 대량의 데이터를 쿼리하고자 ETL 프로세스틀 사용해 데이터를 전처리해야 하는 경우가 대부분이었다. 하지만 이 전처리는 데이터 양이 거대하다면 ETL 프로세스가 오래 걸리기 마련.
  따라서, 초기에는 다양한 소스에서 데이터를 수집하고 객체 스토리지에 저장해 `데이터 레이크`를 구현한다. - 이때 Athena를 사용하면 표준 SQL을 사용해 데이터 레이크 내의 텍스트 기반 데이터를 직접 쿼리할 수 있다.

      <br>

**Glue크롤러와 Athena**

---

- glue 크롤러는 데이터 소스를 자동으로 검색하여 메타데이터를 생성하는 서비스이고, athena는 생성된 메타에디터를 기반으로 SQL 쿼리를 실행하여 데이터 분석을 수행할 수 있다.
- 과거에는 대량의 데이터를 쿼리하고자 ETL 프로세스틀 사용해 데이터를 전처리해야 하는 경우가 대부분이었다. 하지만 이 전처리는 데이터 양이 거대하다면 ETL 프로세스가 오래 걸리기 마련.
- Athena 쿼리를 실행하기 전에 `메타데이터`, `스키마`, `데이터 위치`를 설정해야 한다. 이 때 고유 스키마를 정의하는 대신, `glue 데이터 카탈로그`를 사용하면 시간을 절약할 수 있다.
