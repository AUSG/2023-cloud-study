# 4. 기존 RDS for MySQL 데이터베이스의 스토리지 암호화

### 실습

---

기존 데이터베이스의 스토리지를 암호화하기 위해,

기존 데이터베이스의 **읽기 전용 복제본**을 만들고 **읽기 전용 복제본의 스냅샷**을 생성 → 스냅샷을 **암호화된 스냅샷**으로 복사하고 암호화된 스냅샷을 **새 데이터베이스로 복원**

- 사전에 데이터베이스 스냅샷을 암호화하기 위한 **KMS 키**가 필요 → `copy-snapshot` 명령으로 KMS 키를 지정하면 복사하는 스냅샷을 암호화 할 수 있고 암호화된 스냅샷을 새 데이터베이스로 복원하면 암호화된 데이터베이스를 생성할 수 있다.

<Br>
<br>

### 정리

---

- 새로운 데이터베이스를 생성했기 때문에 애플리케이션은 새로운 데이터베이스 엔드포인트를 사용해야 한다.
  - 가동 중지 시간을 최소화하려면 **데이터베이스 엔드포인트를 가리키는 Route 53 DNS 레코드**를 구성할 수 있다.
  - 애플리케이션이 DNS 레코드를 참고하도록 구성한 다음 새로운 데이터베이스 엔드포인트로 DNS 레코드를 업데이트해 데이터베이스 트래픽을 새 데이터베이스로 이동할 수 있다.
- 저장시 암호화(encryption at rest) : AWS 공동 책임 모델 중 최종 사용자가 관리해야하는 보안 접근 방식, 표준이나 규정 준수를 위해 필요한 기능
- 암호화된 스냅샷은 자동으로 다른 리전으로 복사할 수 있고 보관/백업을 위해 S3로 내보낼 수도 있다.
